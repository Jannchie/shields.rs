{% let has_message = !message.is_empty() %}
{% let has_label = !label.is_empty() %}
<svg xmlns="http://www.w3.org/2000/svg" width="{{ total_width }}" height="{{ badge_height }}" role="img" aria-label="{{ accessible_text }}">
    <title>{{ accessible_text }}</title>
    {% if has_link %}
    <a target="_blank" href="{{ link }}">
    {% endif %}
    <linearGradient id="s" x2="0" y2="100%">
        <stop offset="0" stop-color="#bbb" stop-opacity=".1" />
        <stop offset="1" stop-opacity=".1" />
    </linearGradient>
    <clipPath id="r">
        <rect width="{{ total_width }}" height="{{ badge_height }}" rx="{{ rx }}" fill="#fff" />
    </clipPath>
    <g clip-path="url(#r)">
        <rect width="{{ left_width }}" height="{{ badge_height }}" fill="{{ label_color }}" />
        <rect x="{{ left_width }}" width="{{ right_width }}" height="{{ badge_height }}" fill="{{ message_color }}" />
        <rect width="{{ total_width }}" height="{{ badge_height }}" fill="url(#s)" />
    </g>
    <g fill="#fff" text-anchor="middle" font-family="{{ font_family }}" text-rendering="geometricPrecision" font-size="{{ font_size_scaled }}"> 
    
    {% if has_label %} 
    <text aria-hidden="true" x="{{ label_x }}" y="150" fill="{{ label_shadow_color }}" fill-opacity=".3" transform="scale(.1)" textLength="{{ label_width_scaled }}">{{ label }}</text>        <text x="{{ label_x }}" y="140" transform="scale(.1)" fill="{{ label_text_color }}" textLength="{{ label_width_scaled }}">{{ label }}</text> 
    {% endif %}
    {% if has_message %}
     <text aria-hidden="true" x="{{ message_x }}" y="150" fill="{{ message_shadow_color }}" fill-opacity=".3" transform="scale(.1)" textLength="{{ message_width_scaled }}">{{ message }}</text>    <text x="{{ message_x }}" y="140" transform="scale(.1)" fill="{{ message_text_color }}" textLength="{{ message_width_scaled }}">{{ message }}</text>
    {% endif %}
    </g>
    {% if has_link %}
    </a>
    {% endif %}
</svg>